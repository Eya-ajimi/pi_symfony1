{% extends 'aziz/base.html.twig' %}

{% block title %}Vérification du Code{% endblock %}

{% block content %}
  {# Background header identique à l’inscription #}
  <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg"
       style="background-image: url('{{ asset('images/back.jpg') }}'); background-size: cover; background-position: center;">
    <span class="mask bg-gradient-dark opacity-6"></span>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-5 text-center mx-auto">
          <h1 class="text-white mb-2 mt-5">Vérifiez votre compte</h1>
          <p class="text-lead text-white">Entrez le code reçu pour valider votre compte.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row mt-lg-n10 mt-md-n11 mt-n10 justify-content-center">
      <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
        <div class="card border-0 shadow-lg rounded-4 animate-card"
             style="background: rgba(255, 255, 255, 0.15);
                    backdrop-filter: blur(15px);
                    -webkit-backdrop-filter: blur(15px);
                    border: 1px solid rgba(255, 255, 255, 0.2);">

          <div class="card-header text-white text-center py-4 rounded-top-4"
               style="background: rgba(0, 0, 0, 0.6);">
            <h4 class="mb-0 fw-bold text-white">
              <i class="fa-solid fa-shield-check me-2 text-white"></i>Vérification du Code
            </h4>
          </div>

          <div class="card-body px-4 py-4 text-start">
            {% for message in app.flashes('error') %}
              <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}
            {% for message in app.flashes('success') %}
              <div class="alert alert-success">{{ message }}</div>
            {% endfor %}

            <form method="post">
              <div class="mb-3">
                <div class="input-group">
                  <span class="input-group-text bg-white">
                    <i class="fa-solid fa-key"></i>
                  </span>
                  <input type="text"
                         name="verification_code"
                         class="form-control{{ app.request.get('verification_code') is empty ? '' : '' }}"
                         placeholder="Code de vérification"
                         required>
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-dark w-100 fw-bold">Valider</button>
              </div>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block stylesheets %}
  {{ parent() }}

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    @keyframes fadeSlideCard {
      0% {
        opacity: 0;
        transform: translateY(40px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-card {
      animation: fadeSlideCard 0.9s ease-out forwards;
      opacity: 0;
    }
    .invalid-feedback {
      display: block;
    }
  </style>
{% endblock %}
