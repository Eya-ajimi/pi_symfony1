{% extends 'base.html.twig' %}

{% block title %}Client Dashboard{% endblock %}


{% block stylesheets %}
 <link rel="stylesheet" href="{{ asset('css/client.css') }}">


{% endblock %}


{% block content %}


<div class="container">
    <div class="welcome-banner">
        Bienvenue dans l'espace CLIENT
    </div>

    <div class="card">
        <div class="card-header">
            <h4>Profil du client</h4>
            <button type="button" id="toggleEdit" class="btn btn-outline-primary">Modifier</button>
        </div>
        <div class="card-body">
            <img src="/images/60111.jpg" alt="Photo de profil" class="profile-image">

            <form method="post" action="{{ path('client_dashboard') }}">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nom</label>
                        <input type="text" name="nom" class="form-control" value="{{ user.nom }}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Prénom</label>
                        <input type="text" name="prenom" class="form-control" value="{{ user.prenom }}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" class="form-control" value="{{ user.email }}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Adresse</label>
                        <input type="text" name="adresse" class="form-control" value="{{ user.adresse }}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Téléphone</label>
                        <input type="text" name="telephone" class="form-control" value="{{ user.telephone }}" disabled>
                    </div>
                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" name="password" class="form-control" value="****" disabled>
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="submit" id="saveBtn" class="btn btn-success" style="display: none;">Enregistrer</button>
                    <button type="button" id="cancelBtn" class="btn btn-cancel" style="display: none;">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Logout Button -->
    <div class="logout-container">
        <a href="{{ path('app_logout') }}" class="btn btn-danger">
            <i class="fas fa-sign-out-alt"></i> Déconnexion
        </a>
    </div>
</div>

<script>
document.getElementById('toggleEdit').addEventListener('click', function () {
    const formControls = document.querySelectorAll('.form-control');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');
    const isDisabled = formControls[0].disabled;

    formControls.forEach(function (input) {
        input.disabled = !isDisabled;
        if (!isDisabled) {
            input.classList.remove('editing');
        } else {
            input.classList.add('editing');
        }
    });

    if (isDisabled) {
        this.style.display = 'none';
        saveBtn.style.display = 'inline-block';
        cancelBtn.style.display = 'inline-block';
    }
});

document.getElementById('cancelBtn').addEventListener('click', function () {
    window.location.reload();
});
</script>
{% endblock %}